#version 450
layout(local_size_x = 8, local_size_y = 8, local_size_z = 1) in;

struct shared_EnvShaderUniform
{
    vec3 camera_pos;
    vec3 camera_look;
    vec3 camera_h;
    vec3 camera_v;
    uvec2 size;
    float time;
    uint frame_index;
};

layout(set = 0, binding = 0, std140) uniform _uniform
{
    shared_EnvShaderUniform _m0;
} _uniform_1;

layout(set = 1, binding = 2, std430) buffer svt
{
    uint _m0[];
} svt_1;

layout(set = 1, binding = 0, rgba32f) uniform writeonly image2D src_tex;

void main()
{
    do
    {
        float _147 = float(gl_GlobalInvocationID.x);
        float _149 = float(gl_GlobalInvocationID.y);
        float _176 = (_uniform_1._m0.camera_look.x + (_147 * _uniform_1._m0.camera_h.x)) + (_149 * _uniform_1._m0.camera_v.x);
        float _177 = (_uniform_1._m0.camera_look.y + (_147 * _uniform_1._m0.camera_h.y)) + (_149 * _uniform_1._m0.camera_v.y);
        float _178 = (_uniform_1._m0.camera_look.z + (_147 * _uniform_1._m0.camera_h.z)) + (_149 * _uniform_1._m0.camera_v.z);
        uint _138[23];
        _138[0u] = 0u;
        _138[1u] = 0u;
        _138[2u] = 0u;
        _138[3u] = 0u;
        _138[4u] = 0u;
        _138[5u] = 0u;
        _138[6u] = 0u;
        _138[7u] = 0u;
        _138[8u] = 0u;
        _138[9u] = 0u;
        _138[10u] = 0u;
        _138[11u] = 0u;
        _138[12u] = 0u;
        _138[13u] = 0u;
        _138[14u] = 0u;
        _138[15u] = 0u;
        _138[16u] = 0u;
        _138[17u] = 0u;
        _138[18u] = 0u;
        _138[19u] = 0u;
        _138[20u] = 0u;
        _138[21u] = 0u;
        _138[22u] = 0u;
        float _139[23];
        _139[0u] = 0.0;
        _139[1u] = 0.0;
        _139[2u] = 0.0;
        _139[3u] = 0.0;
        _139[4u] = 0.0;
        _139[5u] = 0.0;
        _139[6u] = 0.0;
        _139[7u] = 0.0;
        _139[8u] = 0.0;
        _139[9u] = 0.0;
        _139[10u] = 0.0;
        _139[11u] = 0.0;
        _139[12u] = 0.0;
        _139[13u] = 0.0;
        _139[14u] = 0.0;
        _139[15u] = 0.0;
        _139[16u] = 0.0;
        _139[17u] = 0.0;
        _139[18u] = 0.0;
        _139[19u] = 0.0;
        _139[20u] = 0.0;
        _139[21u] = 0.0;
        _139[22u] = 0.0;
        vec3 _819 = (_uniform_1._m0.camera_pos * vec3(0.0009765625)) + vec3(1.0);
        float _836;
        if (abs(_176) > 3.5527136788005009293556213378906e-15)
        {
            _836 = _176;
        }
        else
        {
            _836 = (_176 >= 0.0) ? 3.5527136788005009293556213378906e-15 : (-3.5527136788005009293556213378906e-15);
        }
        float _852;
        if (abs(_177) > 3.5527136788005009293556213378906e-15)
        {
            _852 = _177;
        }
        else
        {
            _852 = (_177 >= 0.0) ? 3.5527136788005009293556213378906e-15 : (-3.5527136788005009293556213378906e-15);
        }
        float _868;
        if (abs(_178) > 3.5527136788005009293556213378906e-15)
        {
            _868 = _178;
        }
        else
        {
            _868 = (_178 >= 0.0) ? 3.5527136788005009293556213378906e-15 : (-3.5527136788005009293556213378906e-15);
        }
        float _232 = abs(_836);
        float _234 = abs(_852);
        float _236 = abs(_868);
        float _241 = (-1.0) / _232;
        float _242 = (-1.0) / _234;
        float _243 = (-1.0) / _236;
        bool _253 = _836 > 0.0;
        vec3 _261;
        if (_253)
        {
            _261 = vec3(((-3.0) / _232) - (_241 * _819.x), _242 * _819.y, _243 * _819.z);
        }
        else
        {
            _261 = vec3(_241, _242, _243) * _819;
        }
        uint _969 = uint(_253);
        vec3 _273;
        uint _274;
        if (_852 > 0.0)
        {
            vec3 _272 = _261;
            _272.y = ((-3.0) / _234) - _261.y;
            _273 = _272;
            _274 = _969 ^ 2u;
        }
        else
        {
            _273 = _261;
            _274 = _969;
        }
        vec3 _285;
        uint _286;
        if (_868 > 0.0)
        {
            vec3 _284 = _273;
            _284.z = ((-3.0) / _236) - _273.z;
            _285 = _284;
            _286 = _274 ^ 4u;
        }
        else
        {
            _285 = _273;
            _286 = _274;
        }
        float _305 = min(min(_241 - _285.x, _242 - _285.y), _243 - _285.z);
        float _306 = max(max(max(((-2.0) / _232) - _285.x, ((-2.0) / _234) - _285.y), ((-2.0) / _236) - _285.z), 0.0);
        bool _311 = (((-1.5) / _232) - _285.x) > _306;
        vec3 _972 = mix(vec3(1.0), vec3(1.5, 1.0, 1.0), bvec3(_311));
        uint _973 = uint(_311);
        vec3 _328;
        uint _329;
        if ((((-1.5) / _234) - _285.y) > _306)
        {
            vec3 _327 = _972;
            _327.y = 1.5;
            _328 = _327;
            _329 = _973 ^ 2u;
        }
        else
        {
            _328 = _972;
            _329 = _973;
        }
        vec3 _339;
        uint _340;
        if ((((-1.5) / _236) - _285.z) > _306)
        {
            vec3 _338 = _328;
            _338.z = 1.5;
            _339 = _338;
            _340 = _329 ^ 4u;
        }
        else
        {
            _339 = _328;
            _340 = _329;
        }
        vec3 _343;
        _343 = _339;
        vec3 _344;
        float _347;
        uint _349;
        uint _351;
        uint _353;
        uint _355;
        float _357;
        float _359;
        float _361;
        int _363;
        bool _685;
        bool _920;
        float _346 = 0.5;
        uint _348 = 22u;
        uint _350 = _340;
        uint _352 = 0u;
        uint _354 = 0u;
        float _356 = _305;
        float _358 = _305;
        float _360 = _306;
        int _362 = 0;
        bool _364 = true;
        for (;;)
        {
            if (_364)
            {
                bool _368 = _348 < 23u;
                bool _686;
                if (_368)
                {
                    uint _391;
                    if (_352 == 0u)
                    {
                        uint _378 = _354 + (_350 ^ _286);
                        if (!(_378 < uint(svt_1._m0.length())))
                        {
                            _920 = false;
                            break;
                        }
                        _391 = svt_1._m0[_378];
                    }
                    else
                    {
                        _391 = _352;
                    }
                    float _400 = (_343.x * _241) - _285.x;
                    float _402 = (_343.y * _242) - _285.y;
                    float _404 = (_343.z * _243) - _285.z;
                    float _406 = min(_400, min(_402, _404));
                    bool _412;
                    if (_391 == 0u)
                    {
                        _412 = false;
                    }
                    else
                    {
                        _412 = _360 <= _358;
                    }
                    vec3 _515;
                    float _516;
                    uint _517;
                    uint _518;
                    uint _519;
                    uint _520;
                    float _521;
                    float _522;
                    bool _523;
                    bool _524;
                    bool _525;
                    if (_412)
                    {
                        float _416 = min(_358, _406);
                        float _417 = _346 * 0.5;
                        bool _424 = _360 <= _416;
                        vec3 _504;
                        float _505;
                        uint _506;
                        uint _507;
                        uint _508;
                        uint _509;
                        float _510;
                        float _511;
                        bool _512;
                        bool _513;
                        if (_424)
                        {
                            bool _429 = (_391 & 2147483648u) == 0u;
                            vec3 _494;
                            uint _496;
                            uint _497;
                            uint _499;
                            if (_429)
                            {
                                _494 = _343;
                                _496 = _348;
                                _497 = _350;
                                _499 = _354;
                            }
                            else
                            {
                                if (_406 < _356)
                                {
                                    if (_368)
                                    {
                                        _138[_348] = _354;
                                        if (!_368)
                                        {
                                            _920 = false;
                                            break;
                                        }
                                        _139[_348] = _358;
                                    }
                                    else
                                    {
                                        _920 = false;
                                        break;
                                    }
                                }
                                else
                                {
                                }
                                bool _464 = ((_417 * _241) + _400) > _360;
                                vec3 _472;
                                if (_464)
                                {
                                    vec3 _471 = _343;
                                    _471.x = _343.x + _417;
                                    _472 = _471;
                                }
                                else
                                {
                                    _472 = _343;
                                }
                                uint _974 = uint(_464);
                                vec3 _482;
                                uint _483;
                                if (((_417 * _242) + _402) > _360)
                                {
                                    vec3 _481 = _472;
                                    _481.y = _472.y + _417;
                                    _482 = _481;
                                    _483 = _974 ^ 2u;
                                }
                                else
                                {
                                    _482 = _472;
                                    _483 = _974;
                                }
                                vec3 _492;
                                uint _493;
                                if (((_417 * _243) + _404) > _360)
                                {
                                    vec3 _491 = _482;
                                    _491.z = _482.z + _417;
                                    _492 = _491;
                                    _493 = _483 ^ 4u;
                                }
                                else
                                {
                                    _492 = _482;
                                    _493 = _483;
                                }
                                _494 = _492;
                                _496 = _348 - 1u;
                                _497 = _493;
                                _499 = (_391 & 2147483647u) << 3u;
                            }
                            _504 = _494;
                            _505 = _429 ? _346 : _417;
                            _506 = _496;
                            _507 = _497;
                            _508 = _429 ? _391 : 0u;
                            _509 = _499;
                            _510 = _429 ? _356 : _406;
                            _511 = _429 ? _358 : _416;
                            _512 = _429 ? true : false;
                            _513 = _429 ? false : true;
                        }
                        else
                        {
                            _504 = _343;
                            _505 = _346;
                            _506 = _348;
                            _507 = _350;
                            _508 = _391;
                            _509 = _354;
                            _510 = _356;
                            _511 = _358;
                            _512 = false;
                            _513 = false;
                        }
                        _515 = _504;
                        _516 = _505;
                        _517 = _506;
                        _518 = _507;
                        _519 = _508;
                        _520 = _509;
                        _521 = _510;
                        _522 = _511;
                        _523 = _512;
                        _524 = _513;
                        _525 = _424 ? false : true;
                    }
                    else
                    {
                        _515 = _343;
                        _516 = _346;
                        _517 = _348;
                        _518 = _350;
                        _519 = _391;
                        _520 = _354;
                        _521 = _356;
                        _522 = _358;
                        _523 = false;
                        _524 = false;
                        _525 = true;
                    }
                    vec3 _674;
                    float _675;
                    uint _676;
                    uint _677;
                    uint _678;
                    uint _679;
                    float _680;
                    float _681;
                    if (_525)
                    {
                        bool _529 = _400 <= _406;
                        vec3 _537;
                        if (_529)
                        {
                            vec3 _536 = _515;
                            _536.x = _515.x - _516;
                            _537 = _536;
                        }
                        else
                        {
                            _537 = _515;
                        }
                        uint _982 = uint(_529);
                        vec3 _547;
                        uint _548;
                        if (_402 <= _406)
                        {
                            vec3 _546 = _537;
                            _546.y = _537.y - _516;
                            _547 = _546;
                            _548 = _982 ^ 2u;
                        }
                        else
                        {
                            _547 = _537;
                            _548 = _982;
                        }
                        vec3 _557;
                        uint _558;
                        if (_404 <= _406)
                        {
                            vec3 _556 = _547;
                            _556.z = _547.z - _516;
                            _557 = _556;
                            _558 = _548 ^ 4u;
                        }
                        else
                        {
                            _557 = _547;
                            _558 = _548;
                        }
                        uint _559 = _518 ^ _558;
                        bool _561 = (_559 & _558) == 0u;
                        vec3 _665;
                        float _666;
                        uint _667;
                        uint _668;
                        uint _670;
                        float _672;
                        if (_561)
                        {
                            _665 = _557;
                            _666 = _516;
                            _667 = _517;
                            _668 = _559;
                            _670 = _520;
                            _672 = _522;
                        }
                        else
                        {
                            uint _577;
                            if ((_558 & 1u) == 0u)
                            {
                                _577 = 0u;
                            }
                            else
                            {
                                _577 = 0u | (floatBitsToUint(_557.x) ^ floatBitsToUint(_557.x + _516));
                            }
                            uint _590;
                            if ((_558 & 2u) == 0u)
                            {
                                _590 = _577;
                            }
                            else
                            {
                                _590 = _577 | (floatBitsToUint(_557.y) ^ floatBitsToUint(_557.y + _516));
                            }
                            uint _603;
                            if ((_558 & 4u) == 0u)
                            {
                                _603 = _590;
                            }
                            else
                            {
                                _603 = _590 | (floatBitsToUint(_557.z) ^ floatBitsToUint(_557.z + _516));
                            }
                            uint _615;
                            float _621;
                            vec3 _643;
                            uint _652;
                            uint _890 = uint(findMSB(_603));
                            bool _610 = _890 < 23u;
                            if (_610)
                            {
                                _615 = _138[_890];
                                if (!_610)
                                {
                                    _920 = false;
                                    break;
                                }
                                _621 = _139[_890];
                                uint _624 = _890 & 31u;
                                uint _625 = floatBitsToUint(_557.x) >> _624;
                                uint _629 = floatBitsToUint(_557.y) >> _624;
                                uint _633 = floatBitsToUint(_557.z) >> _624;
                                _643 = vec3(uintBitsToFloat(_625 << _624), uintBitsToFloat(_629 << _624), uintBitsToFloat(_633 << _624));
                                _652 = ((_625 & 1u) | ((_629 & 1u) << 1u)) | ((_633 & 1u) << 2u);
                            }
                            else
                            {
                                _920 = false;
                                break;
                            }
                            _665 = _643;
                            _666 = uintBitsToFloat((_890 + 104u) << 23u);
                            _667 = _890;
                            _668 = _652;
                            _670 = _615;
                            _672 = _621;
                        }
                        _674 = _665;
                        _675 = _666;
                        _676 = _667;
                        _677 = _668;
                        _678 = _561 ? _519 : 0u;
                        _679 = _670;
                        _680 = _561 ? _521 : 0.0;
                        _681 = _672;
                    }
                    else
                    {
                        _674 = _515;
                        _675 = _516;
                        _676 = _517;
                        _677 = _518;
                        _678 = _519;
                        _679 = _520;
                        _680 = _521;
                        _681 = _522;
                    }
                    _344 = _674;
                    _347 = _675;
                    _349 = _676;
                    _351 = _677;
                    _353 = _678;
                    _355 = _679;
                    _357 = _680;
                    _359 = _681;
                    _361 = _525 ? _406 : _360;
                    _363 = _362 + 1;
                    _685 = _525 ? true : _524;
                    _686 = _525 ? false : _523;
                }
                else
                {
                    _344 = _343;
                    _347 = _346;
                    _349 = _348;
                    _351 = _350;
                    _353 = _352;
                    _355 = _354;
                    _357 = _356;
                    _359 = _358;
                    _361 = _360;
                    _363 = _362;
                    _685 = false;
                    _686 = true;
                }
                if (_686)
                {
                    float _691 = float(_363) * 0.0078125;
                    bool _707;
                    if (gl_GlobalInvocationID.x < _uniform_1._m0.size.x)
                    {
                        _707 = gl_GlobalInvocationID.y < _uniform_1._m0.size.y;
                    }
                    else
                    {
                        _707 = false;
                    }
                    if (_707)
                    {
                        imageStore(src_tex, ivec2(int(gl_GlobalInvocationID.x), int(gl_GlobalInvocationID.y)), vec4(_691, _691, _691, 1.0));
                    }
                    else
                    {
                    }
                    _920 = true;
                    break;
                }
                _343 = _344;
                _346 = _347;
                _348 = _349;
                _350 = _351;
                _352 = _353;
                _354 = _355;
                _356 = _357;
                _358 = _359;
                _360 = _361;
                _362 = _363;
                _364 = _685;
                continue;
            }
            else
            {
                _920 = false;
                break;
            }
        }
        if (_920)
        {
            break;
        }
        break;
    } while(false);
}

